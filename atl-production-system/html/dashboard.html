<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n de Producci√≥n ¬∑ Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js" defer></script>
    <script src="../js/dashboard.js" defer></script>
</head>
<body class="dashboard-body">
    <div class="demo-banner">
        <div class="demo-banner__content">
            <div class="demo-banner__left">
                <span class="demo-badge">Demo interactiva</span>
                <p>Monitorea la operaci√≥n en la planta Aguascalientes con datos simulados listos para presentar.</p>
            </div>
            <div class="demo-banner__actions">
                <button id="open-breaks" class="demo-btn demo-btn--ghost">Configurar descansos</button>
                <button id="download-report" class="demo-btn demo-btn--primary">Descargar reporte</button>
            </div>
        </div>
    </div>

    <div class="app-shell">
        <aside class="app-sidebar">
            <div class="app-sidebar__header">
                <div class="app-logo">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 2L3 7l9 5 9-5-9-5z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l9 5 9-5" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 17l9 5 9-5" />
                    </svg>
                    <div>
                        <h1>Sistema de Gesti√≥n</h1>
                        <span>Planta Aguascalientes</span>
                    </div>
                </div>
                <button id="sidebar-toggle" class="sidebar-toggle" aria-label="Cerrar men√∫">
                    <span></span>
                </button>
            </div>

            <nav class="app-nav" aria-label="Secciones del dashboard">
                <button class="app-nav__item app-nav__item--active">
                    <span class="app-nav__icon" aria-hidden="true">üè†</span>
                    Panel principal
                </button>
                <button class="app-nav__item" data-target="section-produccion" data-toast="Ir a Producci√≥n">
                    <span class="app-nav__icon" aria-hidden="true">üè≠</span>
                    Producci√≥n
                </button>
                <button class="app-nav__item" data-target="section-calidad" data-toast="Ir a Calidad">
                    <span class="app-nav__icon" aria-hidden="true">üß™</span>
                    Calidad
                </button>
                <button class="app-nav__item" data-target="section-personal" data-toast="Ir a Personal">
                    <span class="app-nav__icon" aria-hidden="true">üë•</span>
                    Personal
                </button>
                <button class="app-nav__item" data-target="section-reportes" data-toast="Ir a Reportes">
                    <span class="app-nav__icon" aria-hidden="true">üìä</span>
                    Reportes
                </button>
                <span class="app-nav__label">Accesos r√°pidos</span>
                <button class="app-nav__item" data-action="refresh-orders" data-toast="Actualizar √≥rdenes">
                    <span class="app-nav__icon" aria-hidden="true">üìù</span>
                    Actualizar √≥rdenes
                </button>
                <button class="app-nav__item" data-action="open-maintenance" data-toast="Solicitar mantenimiento">
                    <span class="app-nav__icon" aria-hidden="true">üõ†Ô∏è</span>
                    Solicitar mantenimiento
                </button>
                <button class="app-nav__item" data-action="open-audit" data-toast="Auditor√≠a en vivo">
                    <span class="app-nav__icon" aria-hidden="true">üõ°Ô∏è</span>
                    Auditor√≠a en vivo
                </button>
            </nav>

            <footer class="app-sidebar__footer">
                <div class="user-card">
                    <div class="user-card__avatar" aria-hidden="true">CR</div>
                    <div>
                        <p id="sidebar-user" class="user-card__name">Carlos Rodr√≠guez</p>
                        <span id="sidebar-role" class="user-card__role">Supervisor</span>
                    </div>
                </div>
                <div class="sidebar-status">
                    <span class="sidebar-status__label">Shift actual</span>
                    <span id="sidebar-shift" class="sidebar-status__value">Matutino</span>
                </div>
                <button id="logout-btn" class="sidebar-logout">Cerrar sesi√≥n</button>
            </footer>
        </aside>

        <div class="app-main">
            <header class="main-header">
                <div>
                    <h2>Hola, <span id="user-name">Supervisor</span></h2>
                    <p>Resumen del turno <span id="current-shift">Matutino</span> con datos en vivo.</p>
                </div>
                <div class="main-actions">
                    <button id="start-standup" class="secondary-btn">
                        <span aria-hidden="true">üßë‚Äçü§ù‚Äçüßë</span>
                        Iniciar junta r√°pida
                    </button>
                    <button id="open-commands" class="secondary-btn secondary-btn--ghost">
                        <span aria-hidden="true">‚åò</span>
                        Comandos r√°pidos
                    </button>
                </div>
            </header>

            <main class="main-content">
                <section class="kpi-grid" aria-label="Indicadores principales">
                    <article class="kpi-card">
                        <header>
                            <span class="kpi-icon" aria-hidden="true">‚ö°Ô∏è</span>
                            <div>
                                <p>Eficiencia global</p>
                                <span id="kpi-efficiency-trend" class="kpi-trend">--</span>
                            </div>
                        </header>
                        <strong id="kpi-efficiency" class="kpi-value">--%</strong>
                        <span class="kpi-subtitle">Objetivo 92%</span>
                    </article>
                    <article class="kpi-card">
                        <header>
                            <span class="kpi-icon" aria-hidden="true">üì¶</span>
                            <div>
                                <p>Unidades producidas</p>
                                <span id="kpi-output-trend" class="kpi-trend">--</span>
                            </div>
                        </header>
                        <strong id="kpi-output" class="kpi-value">--</strong>
                        <span class="kpi-subtitle">Acumulado del turno</span>
                    </article>
                    <article class="kpi-card">
                        <header>
                            <span class="kpi-icon" aria-hidden="true">üóÇÔ∏è</span>
                            <div>
                                <p>√ìrdenes activas</p>
                                <span id="kpi-orders-trend" class="kpi-trend">--</span>
                            </div>
                        </header>
                        <strong id="kpi-orders" class="kpi-value">--</strong>
                        <span class="kpi-subtitle">Con promesa para hoy</span>
                    </article>
                    <article class="kpi-card">
                        <header>
                            <span class="kpi-icon" aria-hidden="true">‚úÖ</span>
                            <div>
                                <p>Calidad en primera pasada</p>
                                <span id="kpi-quality-trend" class="kpi-trend">--</span>
                            </div>
                        </header>
                        <strong id="kpi-quality" class="kpi-value">--%</strong>
                        <span class="kpi-subtitle">Meta 98%</span>
                    </article>
                </section>

                <section class="panel-grid panel-grid--two">
                    <article class="panel panel--stretch" aria-labelledby="production-title" id="section-produccion">
                        <header class="panel-header">
                            <div>
                                <h3 id="production-title">Evoluci√≥n de producci√≥n</h3>
                                <p>Comparativa contra el plan del turno</p>
                            </div>
                            <div class="range-controls" role="group" aria-label="Intervalo de tiempo">
                                <button class="chip chip--active" data-range="shift">Turno</button>
                                <button class="chip" data-range="day">D√≠a</button>
                                <button class="chip" data-range="week">Semana</button>
                            </div>
                        </header>
                        <canvas id="production-trend" aria-label="Gr√°fica de unidades producidas"></canvas>
                    </article>

                    <article class="panel" aria-labelledby="shift-summary-title">
                        <header class="panel-header">
                            <div>
                                <h3 id="shift-summary-title">Turno en curso</h3>
                                <p id="shift-meta">Supervisi√≥n en l√≠nea A y C</p>
                            </div>
                            <span class="chip chip--light" id="shift-duration">--</span>
                        </header>
                        <div class="shift-progress">
                            <div class="shift-progress__bar" id="shift-progress-bar" style="width: 0%"></div>
                        </div>
                        <ul class="shift-stats">
                            <li>
                                <span>OEE</span>
                                <strong id="quick-stat-oee">--%</strong>
                            </li>
                            <li>
                                <span>Scrap</span>
                                <strong id="quick-stat-scrap">--%</strong>
                            </li>
                            <li>
                                <span>Tiempo inactivo</span>
                                <strong id="quick-stat-downtime">-- min</strong>
                            </li>
                        </ul>
                        <button id="open-kpis" class="secondary-btn w-full">Ver detalle de KPIs</button>
                    </article>
                </section>

                <section class="panel-grid panel-grid--three">
                    <article class="panel" aria-labelledby="activity-title">
                        <header class="panel-header">
                            <div>
                                <h3 id="activity-title">Actividad reciente</h3>
                                <p id="activity-summary">Eventos relevantes del turno</p>
                            </div>
                            <div class="chip-group" id="activity-filters">
                                <button class="chip chip--active" data-filter="all">Todo</button>
                                <button class="chip" data-filter="orders">√ìrdenes</button>
                                <button class="chip" data-filter="quality">Calidad</button>
                                <button class="chip" data-filter="people">Personal</button>
                            </div>
                        </header>
                        <ul id="activity-feed" class="timeline" aria-live="polite"></ul>
                    </article>

                    <article class="panel" aria-labelledby="alerts-title" id="section-calidad">
                        <header class="panel-header">
                            <div>
                                <h3 id="alerts-title">Alertas y acciones</h3>
                                <p>Acciones pendientes de seguimiento</p>
                            </div>
                            <button id="acknowledge-alerts" class="chip">Marcar como atendidas</button>
                        </header>
                        <ul id="alerts-list" class="alerts"></ul>
                    </article>

                    <article class="panel" aria-labelledby="team-title" id="section-personal">
                        <header class="panel-header">
                            <div>
                                <h3 id="team-title">Equipo en planta</h3>
                                <p>√öltimos registros y disponibilidad</p>
                            </div>
                            <button id="open-attendance" class="chip chip--light">Ver asistencias</button>
                        </header>
                        <div id="team-grid" class="team-grid"></div>
                    </article>
                </section>

                <section class="panel-grid panel-grid--two">
                    <article class="panel" aria-labelledby="orders-title" id="section-reportes">
                        <header class="panel-header">
                            <div>
                                <h3 id="orders-title">Pipeline de √≥rdenes</h3>
                                <p>Estados priorizados para cierre del d√≠a</p>
                            </div>
                            <button id="refresh-orders" class="chip">Actualizar</button>
                        </header>
                        <ul id="orders-list" class="orders-list"></ul>
                        <div id="orders-empty" class="empty-state hidden">
                            <span aria-hidden="true">üéâ</span>
                            <p>No hay √≥rdenes pendientes por liberar.</p>
                        </div>
                    </article>

                    <article class="panel" aria-labelledby="maintenance-title">
                        <header class="panel-header">
                            <div>
                                <h3 id="maintenance-title">Mantenimiento y soporte</h3>
                                <p>Solicitudes y verificaciones programadas</p>
                            </div>
                            <button id="open-maintenance" class="chip chip--light">Agendar</button>
                        </header>
                        <ul id="maintenance-list" class="maintenance"></ul>
                    </article>
                </section>
            </main>

            <footer class="app-footer">
                <span>¬© <span id="footer-year"></span> Sistema de Gesti√≥n de Producci√≥n. Demo creada para portafolio profesional.</span>
                <div class="footer-links">
                    <span class="footer-link">Versi√≥n demo 3.0</span>
                    <span class="footer-dot" aria-hidden="true">‚Ä¢</span>
                    <button id="view-release-notes" class="footer-link">Notas de la versi√≥n</button>
                </div>
            </footer>
        </div>
    </div>

    <div id="kpi-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="kpi-modal-title">
        <div class="modal__backdrop" data-close="kpi-modal"></div>
        <div class="modal__content">
            <header class="modal__header">
                <div>
                    <p class="modal__eyebrow">KPIs del intervalo</p>
                    <h3 id="kpi-modal-title">Resumen detallado</h3>
                </div>
                <button id="kpi-modal-close" class="modal__close" aria-label="Cerrar">√ó</button>
            </header>
            <div id="kpi-modal-body" class="modal__body"></div>
        </div>
    </div>

    <div id="toast" class="toast hidden" role="status" aria-live="assertive"></div>
</body>
</html>
